## 南京大学软件测试中心在线业务平台设计说明书

[toc]

## 一、概述

 “南大测试在线管理平台”（下称“本平台”）是一个以网页浏览器为载体、通过互联网提供服务，用于实现“南大测试”在线业务的在线管理的平台。本平台基于南京大学软件测试中心的真实业务流程开发，服务于南京大学软件测试中心，意在提供一个简明易用、稳定高效的在线管理平台。通过开发本平台，团队成员的专业知识得以实践、协作开发能力得到提升。本平台是基于多个开放源代码的工具开发的独立软件。

 根据南京大学软件测试中心的业务需求，本平台一方面提供良好易用的用户交互，另一方面提供稳定可靠的数据持久化及对数据的操作方法。

 本平台由浏览器前端和服务器后端两部分构成。

浏览器前端指用户利用现代浏览器（包括但不限于Chrome、Chromium及其衍生品、Firefox等浏览器）获得可视化的所见即所得的交互界面；浏览器后端通过向浏览器前端提供可调用的 RESTful API 对数据进行增加、查找、修改、删除等操作。

前端基于React框架，使用了Ant Design Pro脚手架及Umi应用框架；具有委托、测试、样品、用户四个模块，各模块页面使用树形结构组织，并通过导航栏进行路由跳转。

后端使用微服务架构MSA，即将客户需求按照功能划分，将前端请求交付网关处理并分发到各微服务框架；每个微服务采用Spring MVC，基于Spring boot框架，构建了一个分层的架构；数据库分别采用MySQL（用户管理服务）及MongoDB（委托管理服务、合同管理服务、样品管理服务、测试项目管理服务），以及采用对象存储（OSS）方式存储各文件pdf。

具体架构如下：

- Onlinebiz

  - Onlinebiz-common
    - model

  - Onlinebiz-contract
    - controller
    - service
    - DAO
  - Onlinebiz-document
  - Onlinebiz-discovery
  - Onlinebiz-entrust
  - Onlinebiz-gateway
  - Onlinebiz-sample
  - Onlinebiz-test
  - Onlinebiz-user

​	其中Onlinebiz-common服务用于存储各微服务中具体文档抽象而成的Java类，所有微服务依赖于该服务从而使用各数据结构

​	对于其余Onlinebiz-\<module\>，基于MVC架构，分为controller层、service层、DAO层，分别用于处理**前后端交互**、**业务逻辑**、**数据访问**。

服务间调用如下图所示：

![](C:\Users\86180\Desktop\最终提交\服务间调用图.jpg)

## 二、具体设计

> **委托申请服务**

![](C:\Users\86180\Desktop\最终提交\委托申请流程图.jpg)

委托申请服务指平台对客户新申请的处理服务。客户可以在任意时刻发起新的委托，平台会由市场部主管分派委托给市场部接洽人员，市场部接洽人员对委托进行初审；初审通过后，平台会由测试部主管分派委托给测试部人员，测试部接洽人员对委托进行再审；再审通过后，将有市场部人员与客户进行议价，议价成功后委托阶段结束。

委托申请服务所需实现的功能除了基本的增删改查外还包括填写委托、分派委托、委托评审、填写报价单、议价

- 填写委托

  客户在委托申请前填写委托申请，等待后台流程直至出示报价单或审核不通过

- 分派委托

  市场部主管在委托列表中分派待分派的委托申请给市场部人员

  测试部主管在委托列表中分派待分派的委托申请给测试部人员

- 委托评审

  市场部人员审核分派的委托申请，给出处理意见并填写评审表，等待测试部人员评审结束

  测试部人员审核分派的委托申请，给出处理意见并填写评审表

- 填写报价单

  市场部人员在测试部人员审核通过后，填写报价单，等待客户议价

- 议价

  客户在收到报价单后可以议价，并等待市场部确认议价或拒绝议价

  市场部人员在收到客户议价申请后可以确认议价或拒绝议价

> **合同服务**

![](C:\Users\86180\Desktop\最终提交\合同服务流程图.jpg)

合同服务指平台对已结束的委托进行签订合同流程服务。市场部人员在客户接受报价单后，着手进行合同填写；平台方合同填写完毕后，客户可通过委托列表查看需自己填写的合同并完成客户方合同填写；合同填写完毕后，将由市场部对合同进行审核；审核通过后将上传扫描件保存。

合同服务所需实现的功能除了基本的增删改查外还包括填写合同、合同评审、上传扫描件

- 填写合同

  市场部填写平台方合同，并等待客户填写完毕客户方合同

  客户在市场部填写完平台方合同后可填写客户方合同，并等待市场部评审结果

- 合同评审

  市场部人员审核合同，给出处理意见

- 上传扫描件

  市场部人员在审核通过后，上传合同扫描件留存

> **测试项目服务**

![](C:\Users\86180\Desktop\最终提交\测试服务流程图.jpg)

测试项目服务指平台对已签订合同的委托申请进行实际测试工作服务。市场部人员在签订报价单之后生成测试项目，平台会由质量部主管分派测试项目给质量部人员；质量部人员分配完成后，测试部人员填写测试方案；测试方案填写完毕后，将由质量部人员进行审核并填写测试方案评审表，上传测试方案扫描件保存；审核通过后，测试部人员着手进行测试并填写各测试阶段文档与测试报告；测试报告提交后，将由质量部人员进行审核并填写测试报告检查表，上传测试报告扫描件保存并签发测试报告；市场部在签发后，将报告发放给客户；客户在收到测试报告后可审核并提出意见；客户审核通过后，质量部人员对所有测试相关文档细节进行再审；审核通过后所有文件归档封存。

测试项目服务所需实现的功能除了基本的增删改查外还包括分派委托、填写测试方案、测试文件评审、上传扫描件、填写各测试文档、填写测试报告、签发测试报告

- 分派委托

  质量部主管在测试项目列表中分派待分派的测试项目给质量部人员

- 填写测试方案

  测试部人员在分配质量部人员后填写测试方案，等待审核

- 测试文件评审

  质量部人员在测试方案填写后，审核分派的测试方案，给出处理意见并填写评审表

  质量部人员在测试报告提交后，审核分派的测试报告，给出处理意见并填写检查表

  客户在质量部人员审核测试报告通过后，审核测试报告，给出处理意见

  质量部人员在客户审核测试报告通过后，审核所有测试文件，给出处理意见

- 上传扫描件

  质量部人员在审核测试方案通过后，上传测试方案扫描件留存

  质量部人员在审核测试报告通过后，上传测试报告扫描件留存

- 签发测试报告

  质量部人员在审核测试报告通过后，签发测试报告给市场部人员

  市场部人员在质量部人员签发测试报告后，签发测试报告给客户

> **文档服务**

![](C:\Users\86180\Desktop\最终提交\文档生成流程图.jpg)

文档服务指平台对流程中某处需要用到生成pdf功能时的服务。请求会发送文件编号及请求方信息，后端会根据该信息进行权限校验并读取数据，根据后端处理逻辑生成pdf并保存至云端，为请求方返回一个OSS链接供以查看文档。

文档服务所需要实现的功能为通过某个文档的ID查找该文档数据并生成pdf。

> **用户管理服务**

![](C:\Users\86180\Desktop\最终提交\用户管理流程图.jpg)

用户管理指对平台的各类使用者进行账号管理，用户类别包含客户（委托方）和后台管理人员。其中，后台管理人员可细分为系统管理员、市场部人员、测试部人员、质量部人员；对于后台管理人员，系统管理员具有一级权限、各部门主管具有二级权限、部门成员具有三级权限。后台管理人员根据各自权限进行权限允许范围内的操作，客户能查询所委托项目的进度、结果和相关政策等。

用户管理服务所需要实现的功能包括用户注册、用户登录、修改账号信息等功能。

- 用户注册：

  注册时，用户需要提供用户名、登陆密码（需要两次验证），用户名需与系统中已存在的用户名不同。注册成功后系统默认登入。

  系统管理员无须注册。

- 用户登录

  用户根据已注册的账号用户名及密码登录

  系统为固定数额的系统管理员预留账户和密码，系统管理员可据此直接登陆。

- 修改账号信息：

  系统管理员和注册成功的用户在输入旧账号信息后可修改账号信息，用户名需与系统中已存在的用户名不同。

> **样品服务**

![](C:\Users\86180\Desktop\最终提交\样品服务流程图.jpg)

样品服务指平台对所有委托对应需要测试的样品集进行维护管理及更新的服务。所有后台管理人员均有权限查看或更新所有样品，首先进入样品集列表页面；在样品集列表页面选定特定的样品集进入样品集页面，样品集页面会展示某一特定委托所对应的所有样品；后台管理人员可根据情况更新样品集信息，更新完毕后返回该样品集页面并展示更新后的样品集合。

样品服务所主要需要实现的功能为基本的增改查（不提供删除操作，如果要删去样品集只能将其标记为销毁）